= `file://` browsing with thumbnails & previews
:crextid: ohknkjkohjanlinnidlecechhdhkhdoh
:crwebstore: https://chrome.google.com/webstore/detail/{crextid}
:iconic: https://github.com/iconic/open-iconic/tree/1d1e8885c503187
:icofolder: https://github.com/iconic/open-iconic/tree/1d1e8885c503187/svg/folder.svg
:icoimg: https://github.com/iconic/open-iconic/tree/1d1e8885c503187/svg/image.svg
:buildcrx: https://github.com/jzacsh/bin/blob/65a3a4ee7902/share/buildcrx

Particularly useful at the moment while all my linux tooling is confused by
webp, yet I use webp heavily. Good old browsers, though, can do everything.

For now this is just an media previewer, but I imagine I might want to add other
capabilities in the future.

image:screenshot.webp[
alt="preview of extension's changes", width="70%"]

Can be installed {crwebstore}[directly from the webstore here]

== contributing

.prerequisites
`npm`, `node` are assumed to be in your `$PATH`. Also expected in your `$PATH`
by some of the build steps are: `mogrify` _(imagemagick)_, `readlink`, `sed`,
`ln` _(and others I'll guess are "safe" to assume you should have)_.

.build "packed" chrome extension
----
$ make PRIVATEK=/abs/path/mykey.pem  # defaults to:
$ make PRIVATEK=/abs/path/mykey.pem extension.crx
mkdir build.29A4wN/extension/
cp manifest.json index.js index.css build.29A4wN/extension/
cd build.29A4wN && zip extension.zip extension/*
  adding: extension/index.css (stored 0%)
  adding: extension/index.js (deflated 65%)
  adding: extension/manifest.json (deflated 44%)
ln --symbolic --force build.29A4wN/extension.zip extension.zip
----

.cleanup existing builds
----
$ make clean
rm -f extension.zip build.* -rf
----

.cleanup and build in one shot
----

$ make PRIVATEK=/abs/path/mykey.pem all
rm -f extension.zip build.* -rf
mkdir build.1OQC8F/extension/
cp manifest.json index.js index.css build.1OQC8F/extension/
cd build.1OQC8F && zip extension.zip extension/*
  adding: extension/index.css (stored 0%)
  adding: extension/index.js (deflated 65%)
  adding: extension/manifest.json (deflated 44%)
ln --symbolic --force build.1OQC8F/extension.zip extension.zip
----

.adjusting semver versioning
. major or minor version is kept in `./major.minor`
. `make extension.crx` auto-builds full semver string
.. run make target *after* committing  for accurate patch numbers

.codebase layout
[options="header"]
|===
| file | purpose
| `Makefile`, `./major.minor` | build & management files
| `src/` | primary code of this repo
| `bin/` | `make` helpers or links to dependencies
| `package.json` | manages dependencies: typescript (`tsc`), and `webpack`
| `webpack.config.js` | manages `webpack` behavior
| `tsconfig.json` | manages `tsc` behavior
| `build/` | volatile temporary directory
| `node_modules/` | dependency installations
|===

== License
See `./LICENSE` for more. Icon is crafted from {icofolder}[these] {icoimg}[two]
{iconic}[Iconic icons]
